Version 4
SHEET 1 2692 1544
WIRE 768 -784 768 -832
WIRE 432 -688 432 -752
WIRE 768 -624 768 -704
WIRE 80 -544 80 -752
WIRE 432 -496 432 -608
WIRE 432 -496 144 -496
WIRE 560 -496 432 -496
WIRE 768 -496 768 -560
WIRE 768 -496 640 -496
WIRE 1056 -496 768 -496
WIRE 1280 -320 1104 -320
WIRE 1504 -320 1360 -320
WIRE 768 -256 768 -304
WIRE 80 -160 80 -448
WIRE 224 -160 80 -160
WIRE 432 -160 304 -160
WIRE 768 -160 768 -192
WIRE 768 -160 432 -160
WIRE 976 -160 768 -160
WIRE 1104 -160 1104 -320
WIRE 1104 -160 1040 -160
WIRE 1280 -160 1104 -160
WIRE 1504 -160 1344 -160
WIRE -144 -112 -144 -160
WIRE 80 -48 80 -160
WIRE -144 0 -144 -48
WIRE -144 0 -320 0
WIRE 64 0 -144 0
WIRE 432 0 432 -160
WIRE 432 0 160 0
WIRE 768 0 768 -160
WIRE 1104 0 1104 -160
WIRE 1168 0 1104 0
WIRE 1328 0 1248 0
WIRE 1504 0 1392 0
WIRE 672 128 592 128
WIRE 592 368 592 128
WIRE 640 368 592 368
WIRE 768 368 768 256
WIRE 768 368 704 368
WIRE 768 448 768 368
WIRE -112 464 -224 464
WIRE 48 464 -48 464
WIRE 592 464 592 368
WIRE 768 592 768 512
WIRE 864 592 768 592
WIRE 1024 592 928 592
WIRE 1152 592 1104 592
WIRE 768 688 768 592
WIRE 768 688 688 688
WIRE 864 688 768 688
WIRE 688 720 688 688
WIRE 864 720 864 688
WIRE 688 848 688 800
WIRE 688 848 576 848
WIRE 864 848 864 800
WIRE 976 848 864 848
WIRE 688 896 688 848
WIRE 864 896 864 848
WIRE -576 928 -768 928
WIRE -400 928 -480 928
WIRE -576 992 -576 928
WIRE -480 992 -480 928
WIRE 688 1008 688 976
WIRE 768 1008 688 1008
WIRE 864 1008 864 976
WIRE 864 1008 768 1008
WIRE 768 1056 768 1008
WIRE -528 1136 -528 1056
WIRE -448 1136 -528 1136
WIRE -384 1136 -448 1136
WIRE -240 1136 -304 1136
WIRE -144 1136 -240 1136
WIRE -48 1136 -144 1136
WIRE 96 1136 16 1136
WIRE 208 1136 176 1136
WIRE -448 1264 -448 1136
WIRE -384 1264 -448 1264
WIRE -240 1264 -240 1136
WIRE -240 1264 -320 1264
WIRE -144 1312 -144 1136
FLAG -400 928 0
FLAG 208 1136 0
FLAG 80 -752 0
FLAG 768 -832 0
FLAG 768 -304 0
FLAG 592 464 0
FLAG 1504 -160 0
FLAG 1504 -320 0
FLAG 1504 0 0
FLAG -320 0 MOTOR_12V_OUT
IOPIN -320 0 In
FLAG 48 464 TACH_IN
IOPIN 48 464 Out
FLAG -768 928 MOTOR_PWM
IOPIN -768 928 In
FLAG 768 1056 0
FLAG 1152 592 0
FLAG 976 848 LCD_VO
FLAG 576 848 LCD_A
FLAG -304 464 0
FLAG -144 1392 0
FLAG 1136 -496 0
FLAG -144 -160 0
FLAG 432 -752 0
SYMBOL npn2 144 -448 R180
WINDOW 0 87 34 Left 2
WINDOW 3 88 62 Left 2
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL npn2 -576 1056 R270
WINDOW 0 33 -49 VRight 2
WINDOW 3 -3 -73 VRight 2
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL irf9540n 160 -48 R90
WINDOW 0 77 27 VRight 2
WINDOW 3 105 -6 VRight 2
SYMATTR InstName U2
SYMBOL Regulators\\7805 768 128 R90
SYMATTR InstName U1
SYMBOL schottky 1040 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMBOL res -288 1120 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 6k
SYMBOL cap -320 1248 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.1µF
SYMBOL diode -48 1152 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4007
SYMBOL voltage 80 1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3V
SYMBOL diode -48 448 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4007
SYMBOL res 320 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 416 -704 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL polcap -128 -48 R180
WINDOW 0 24 57 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 50µF
SYMBOL res 656 -512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL diode 784 -560 R180
WINDOW 0 43 34 Left 2
WINDOW 3 -107 33 Left 2
SYMATTR InstName D5
SYMATTR Value 1N4007
SYMBOL voltage 768 -688 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3V
SYMBOL cap 752 -256 R0
SYMATTR InstName C3
SYMATTR Value 0.33µF
SYMBOL cap 704 352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.1µF
SYMBOL diode 752 448 R0
WINDOW 3 47 27 Left 2
SYMATTR Value 1N4007
SYMATTR InstName D6
SYMBOL polcap 1280 -144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C5
SYMATTR Value 100µF
SYMBOL voltage 1264 -320 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12V
SYMBOL res 1264 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 68k
SYMBOL LED 1328 16 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value NSPW500BS
SYMBOL res 848 880 R0
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL res 672 880 R0
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL diode 864 608 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL voltage 1008 592 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName RPi_VSYS
SYMATTR Value 5V
SYMBOL res 672 704 R0
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL res 848 704 R0
SYMATTR InstName R9
SYMATTR Value 5k
SYMBOL voltage -208 464 R90
WINDOW 0 -16 202 VBottom 2
WINDOW 3 57 -126 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName MOTOR_TACH_OUT
SYMATTR Value PULSE(0V 5V 0 1u 1u 7.5ms 15ms 5)
SYMBOL voltage -144 1296 R0
WINDOW 0 66 15 Left 2
WINDOW 3 65 71 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName PWM_OUT
SYMATTR Value PULSE(5 0 0 1us 1us 1us 40us 5)
SYMBOL voltage 1040 -496 R270
WINDOW 0 -55 -6 VRight 2
WINDOW 3 56 40 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName MOTOR_EN
SYMATTR Value 5V
TEXT 1032 1272 Left 2 ;1N4005 identical to 1N4007, except for Maximum Reverse Voltage (700V vs 1000V not important for us)
TEXT 976 984 Left 2 ;These 2 5k resistors are actually potentiometers
TEXT 1192 520 Left 2 ;Test VSYS as values between 1.8-5.5V
TEXT -376 376 Left 2 ;Assume an ideal 50% duty cycle for motor_tach_out
TEXT -1040 1528 Left 2 !.tran 0 300us
TEXT -720 848 Left 2 ;MOTOR_PWM will be negative due to low-side switching
TEXT 824 296 Left 2 ;Takes 12V, provides stable 5V for LCD
TEXT 1160 -592 Left 2 ;MOTOR_EN pin is digital (outputs 12V to MOTOR_12V_OUT\nif HIGH, will output 0V to MOTOR_12V_OUT if LOW)
